<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="container not-reveal" id="egg-1">
      <h1 class="egg-name">Name here</h1>
      <button class="egg-btn">Reveal</button>
    </div>
    <div class="container reveal" id="egg-1">
      <h1 class="egg-name">Name here</h1>
      <div class="egg-inf">
        <p class="egg-age">Age: ...</p>
        <p class="egg-ban">Ban: ...</p>
        <p class="egg-role">Chuc vu: ...</p>
      </div>
      <button class="egg-btn">hide</button>
    </div>
  </body>
  <script>
    const data = {
      1: {
        name: "Pham Thanh Dat",
        birthdate: new Date('2004-17-09'),
        ban: "giao duc",
      },
      2: {
        name: "Hoang Thi Hanh",
        birthdate: new Date('2005-01-01'),
        ban: "truyen thong",
      },
      3: {
        name: "Trinh Phu Thai",
        birthdate: new Date('2005-01-01'),
        ban: "truyen thong + giao duc",
      },
      4: {
        name: "Nguyen Tuan Dat",
        birthdate: new Date('2004-01-01'),
        ban: "giao duc",
        "chuc vu": "chu nhiem",
      },
    };

    // Hàm này lấy input là data như trên và thực hiện thêm một thẻ div có id là egg-{id} và class container vào body của DOM
    // Thể div egg-{1} chỉ chứa name của một thành viên (trong the h1 class egg-name) và một nút reveal (the button class egg-btn)
    // Khi ấn nút reveal thì text của nút reveal chuyển thành hide và hiển thị các thông tin khác của member
    // Khi ấn nút hide thì quay lại trạng thái ban đầu
    // Nếu không có "chuc vu" thì trả ra "thanh vien"
    // Age tính toán theo bỉthdate
    // Mở file html này ra nhìn 2 thẻ div bên trên để hiểu nha!!!

    // Có thể tách ra nhiều hàm con
    // Submit tất cả code trong 1 file .html
    function addMemberCard(d) {
      const container = document.createElement("div");
      container.id = `egg-${d}`;
      container.classList.add("container", "not-reveal");

      const name = document.createElement("h1");
      name.classList.add("egg-name");
      name.textContent = data[d].name;

      const btn = document.createElement("button");
      btn.classList.add("egg-btn");
      btn.textContent = "Reveal";

      container.appendChild(name);
      container.appendChild(btn);

      document.body.appendChild(container);
    }

    addMemberCard(1);
    addMemberCard(2);
    addMemberCard(3);
    addMemberCard(4);

    const containers = document.querySelectorAll(".container");

    containers.forEach((container) => {
      container.addEventListener("click", (e) => {
        if (e.target.tagName === "BUTTON") {
          const eggInf = document.createElement("div");
          eggInf.classList.add("egg-inf");

          const age = document.createElement("p");
          age.classList.add("egg-age");
          age.textContent = `Age: ${new Date().getFullYear() - data[container.id.split("-")[1]].birthdate.getFullYear()}`;

          const ban = document.createElement("p");
          ban.classList.add("egg-ban");
          ban.textContent = `Ban: ${data[container.id.split("-")[1]].ban}`;

          const role = document.createElement("p");
          role.classList.add("egg-role");
          role.textContent = `Chuc vu: ${data[container.id.split("-")[1]]["chuc vu"] || "thanh vien"}`;

          eggInf.appendChild(age);
          eggInf.appendChild(ban);
          eggInf.appendChild(role);

          container.appendChild(eggInf);

          container.classList.remove("not-reveal");
          container.classList.add("reveal");

          e.target.textContent = "Hide";
        } else {
          container.querySelector(".egg-inf").remove();
          container.classList.remove("reveal");
          container.classList.add("not-reveal");
          e.target.textContent = "Reveal";
        }
      });
    });
  </script>
</html>
